# ~/.config/epine/modules/epitech.yml
c-binary:
  type: epine.c-binary
  src: ["./src/*.c"]
  include: ["./include"]
  define: [EPITECH]

c-binary-tests:
  type: epine.c-binary
  src: ["./src/*.c", "!./src/main.c", "./tests/*.c"]
  include: ["./include"]
  lflags: ["-lcriterion"]

# Epine.yml
config:
  NAME: my_defender

targets:
  -
    name: $(NAME)
    type: epitech.c-binary
    define: [MY_ALLOW_WRITE, MY_ALLOW_MALLOC, MY_ALLOW_FREE]
  -
    name: unit_tests
    type: epitech.c-binary-tests
    lflags: ["-lcriterion", "-lmy"]
  -
    name: tests_run
    needs: [unit_tests]
    run: ./unit_tests $(ARGS)
